{% ifequal navbar_type "horizontal" %}

<p class="text_links" style="text-align: right; margin: 3px 12px 3px 0px;">
{% for nav_entry in navbar_list.qsdTree %}

    {% if nav_entry.entry.is_link %}
      <a href="{{ nav_entry.entry.makeUrl }}"
        title="Click for `{{ nav_entry.entry.makeTitle }}'">
        {{ nav_entry.entry.makeTitle }}
      </a>
    {% else %}
        {{ nav_entry.entry.makeTitle }}
    {% endif %}
    {% if not forloop.last %} |{% endif %}
{% endfor %}
</p>

{% else %}

<!-- secondary nav -->
<ul id="navbar_links">

{% for nav_entry in navbar_list.qsdTree %}
  <li class="divsecondarynavlink {% if nav_entry.entry.indent %}indent{% endif %}{% if nav_entry.has_bits %} movable{% endif %} " id="nav_entry__{{nav_entry.entry.id}}"> 
    {% if nav_entry.entry.is_link %}
      <a href="{{ nav_entry.entry.makeUrl }}"
        title="Click for `{{ nav_entry.entry.makeTitle }}'">
       {% if nav_entry.entry.indent %}<span class="bullet">- </span>{% endif %}
        {{ nav_entry.entry.makeTitle }}
      </a>
    {% else %}
        <span class="bullet">- </span>{{ nav_entry.entry.makeTitle }}
    {% endif %}

    {% if nav_entry.has_bits %}
        <tt>
        <span id="nav_entry__control__{{nav_entry.entry.id}}">
        <a href="/navbar/edit.scm?new_url={{ request.path }}&amp;navbar_id={{ nav_entry.entry.id }}&amp;node_id={{ navbar_list.entry.node.id }}&amp;action=up">[+]</a>
        <a href="/navbar/edit.scm?new_url={{ request.path }}&amp;navbar_id={{ nav_entry.entry.id }}&amp;node_id={{ navbar_list.entry.node.id }}&amp;action=down">[-]</a>
        </span>

        <a href="/navbar/edit.scm?new_url={{ request.path }}&amp;navbar_id={{ nav_entry.entry.id }}&amp;node_id={{ navbar_list.entry.node.id }}&amp;action=delete" onclick="delete_navbar({{nav_entry.entry.id}}); return false;">[X]</a>
        </tt>
    {% endif %}
 </li>
{% endfor %}

<script type="text/javascript">
<!--
dragndrop = function() {
    var Dom = YAHOO.util.Dom;
    var DDM = YAHOO.util.DragDropMgr;

{% for nav_entry in navbar_list.qsdTree %}{% if nav_entry.has_bits %}
    new YAHOO.example.DDList("nav_entry__{{ nav_entry.entry.id }}");
    document.getElementById('nav_entry__control__{{nav_entry.entry.id}}').innerHTML = '';{% endif %}{% endfor %}
    DDM.mode = 0;
};

YAHOO.util.Event.addListener(window, "load", dragndrop);



function delete_navbar(navbar_id) {
   if (!confirm("Are you SURE you want to delete this navbar?")) {
      return;
   }

   var callback = {
    success:function(o) {
       document.getElementById('nav_entry__'+o.argument.nav_entry_id).innerHTML = '';
       document.getElementById('nav_entry__'+o.argument.nav_entry_id).style.display = 'none';
    },
    failure:function(o) {},
    argument: {nav_entry_id: navbar_id}};

   sUrl = '/navbar/edit.scm?new_url={{request.path}}&navbar_id='+navbar_id+'&node_id=&action=delete'

   var request = YAHOO.util.Connect.asyncRequest('GET',sUrl,callback);

}

var handleSuccess = function(o){
   if (o.responseText !== undefined && o.responseText.length > 0) {
      alert(o.responseText);

   }
};

var callback =
{
  success:function(o) {},
  failure:function(o) {},
  argument: {}
};

function move_seq(new_seq) {

   sUrl = '?ajax_movepage&seq='+new_seq;
   //   alert(sUrl);
   var request = YAHOO.util.Connect.asyncRequest('GET',sUrl,callback);
}


//-->
</script>

</ul>

{% endifequal %}