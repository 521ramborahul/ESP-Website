
<link rel="stylesheet" type="text/css" href="/media/styles/forms.css" />

<div id="program_form">
<table cellpadding="3" style="width: 400px; margin: auto" border=1>
<tr>
    <th colspan="3">
    Your schedule for {{ prog.niceName }}
    </th>
</tr>
{% for timeslot in timeslots %}
    {% ifchanged timeslot.0.start.day %}
        <tr><th class="small" colspan="3" height="3" style="text-align: center;">Classes beginning on {{ timeslot.0.pretty_date }}</th></tr>
    {% endifchanged %}
    {% ifchanged timeslot.2 %}
        <tr><th class="small" colspan="3" height="3">Block {{ timeslot.2 }}</th></tr>
    {% endifchanged %}
    <tr>
        <td width="25%" valign="top" align="center"> {{ timeslot.0.short_description }}</td>
        
        <td style="vertical-align: top !important;">
        {% for cls in timeslot.1 %}
	{% comment %}{% if use_priority %}{% endcomment %}
            {% if not cls.section.verbs|length_is:0 %}
                <i>{% for v in cls.section.verbs %}{{ v.friendly_name }}{% if not forloop.last %}, {% endif %}{% endfor %}:</i>
            {% endif %}
	{% comment %}{% endif %}{% endcomment %}
	{{ cls.section.title }} 
            
            {% if request.user.onsite_local %}
                ({{ cls.section.prettyrooms|join:", " }})
            {% endif %}
            {% if not forloop.last %}<br />{% endif %}
        {% endfor %}
        {% if timeslot.1|length_is:0 %}
            Nothing Selected
        {% endif %}
        </td>
        
        {% if not timeslot.1|length_is:0 %}
            {% if module.deadline_met %}
            <td width='25%' align='center' style="vertical-align: top !important;">
            {% for cls in timeslot.1 %}
                <a href="/learn/{{one}}/{{two}}/clearslot/{{timeslot.0.id}}?sec_id={{ cls.section.id }}">[remove]</a>
                {% if cls.changeable %}
                    <a href="/learn/{{one}}/{{two}}/changeslot/{{timeslot.0.id}}?sec_id={{ cls.section.id }}">[change section]</a>
                {% endif %}
                <br />
            {% endfor %}
            {% if timeslot.3 %}
                <a href="/learn/{{one}}/{{two}}/fillslot/{{timeslot.0.id}}">[add class]</a>
                {% if not timeslot.1|length_is:1 %}
                    <a href="/learn/{{one}}/{{two}}/clearslot/{{timeslot.0.id}}">[clear slot]</a>
                {% endif %}
            {% endif %}
            </td>
            {% else %}
            <!-- Allow removal of classes if the appropriate flag is set -->
            {% if allow_removal %}
            <td width='25%' align='center' style="vertical-align: top !important;">
            {% for cls in timeslot.1 %}
                <a href="/learn/{{one}}/{{two}}/clearslot/{{timeslot.0.id}}?sec_id={{ cls.section.id }}">[remove]</a><br />
            {% endfor %}
            </td>
            {% endif %}
            {% endif %}
        {% else %}
            {% if module.deadline_met %}
                <td width='20%' align='center'>
                <a href="/learn/{{one}}/{{two}}/fillslot/{{timeslot.0.id}}">[add class]</a>
                </td>
            {% endif %}	
        {% endif %}
    </tr>

{% endfor %}
</table> 
</div>
<br/>
