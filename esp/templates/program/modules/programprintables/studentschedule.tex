{% autoescape off %}
\documentclass[letterpaper,10pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{fullpage}
\usepackage{multicol}
\usepackage{fancyhdr}
\usepackage{pst-barcode}
\usepackage{textpos}
\usepackage{tabularx}
\usepackage{graphicx}
\usepackage{amsfonts, amsmath, amsthm, amssymb}
\usepackage[left=.5in,top=1cm,right=.5in]{geometry}
\graphicspath{% templatetag openbrace %}{% templatetag openbrace %}{{ PROJECT_ROOT }}templates/program/modules/programprintables/{% templatetag closebrace %}{% templatetag closebrace %}

\pagestyle{fancy}
% \fancyhead[C]{% templatetag openbrace %}{% comment %}\includegraphics[scale = 1]{header-top}{% endcomment %}\includegraphics[scale = 1]{header-line}}
\setlength\headheight{20pt}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt} 
\fancyfoot{}

\begin{document}
{% for student in students %}
\begin{multicols}{3}

\begin{center}
\vspace{1cm}
\begin{tabular}{ c }
Total Amount Owed: \\
\fbox{\textbf{ \${{ student.itemizedcosttotal|floatformat:"-2" }} } } \\
\end{tabular}

\vspace{0.3cm}

\begin{tabular} { | c | }
{% for item in student.admission %} \hline
{{ item.li_type.text|texescape }} (\${% if student.has_financial_aid %}{{ item.li_type.finaid_amount|cut:"-"|floatformat:"-2" }}{% else %}{{ item.amount|cut:"-"|floatformat:"-2" }}{% endif %}) \\
{% endfor %} \hline
\end{tabular}

\vspace{0.2cm}

Additional items: \\
\vspace{0.1cm}
\begin{tabular}{ | c | }
{% for item in student.meals %}\hline
{{ item.li_type.text|texescape }} (\${% if student.has_financial_aid %}{{ item.li_type.finaid_amount|cut:"-"|floatformat:"-2" }}{% else %}{{ item.amount|cut:"-"|floatformat:"-2" }}{% endif %}) \\
{% endfor %}\hline
\end{tabular}

{% if student.paid_online %}
\vspace{0.2cm}
\begin{tabular} { | c | }
{% for item in student.paid_online %} \hline
\textbf{ Paid Online: \${{ item.amount|floatformat:"-2" }} } \\ 
{% endfor %}\hline
\end{tabular}
{% endif %}

\end{center}

\columnbreak
\begin{center}
$ $ \\
{\Large \textbf{ {{ program.niceName }} } } \\
\vspace{0.2cm}
Student Schedule for \\
\vspace{0.5cm}

{\setlength{\baselineskip}{1.5\baselineskip} 
\begin{tabular}{ c }
\LARGE \textbf{ {{ student.first_name|texescape }} } \\ 
\vspace{0.2cm}
\LARGE \textbf{ {{ student.last_name|texescape }} } 
\end{tabular} }
\end{center}

\columnbreak

\begin{flushleft}
\textbf{
Name: {{ student.name|texescape }} \\
Username: {{ student.username|texescape }} \\
User ID: {{ student.id }} \\
}
\end{flushleft}

\end{multicols}

\begin{center}

\vspace{0.3cm}

For help finding your classrooms, please consult the directions and map on your Student Info sheet. \\
If you have any questions or would like to switch classes, please go to the program office. \\

\vspace{0.3cm}

{\large \textbf{Schedule} \\}

\vspace{0.25cm}

\begin{tabularx}{18cm}{|p{3.45cm}|c|X|p{3cm}|}
\hline
\textbf{Time} & \textbf{Room} & \textbf{Class} & \textbf{Teacher(s)} \\
{% for cls in student.classes %}\hline
{{ cls.friendly_times|join:", " }} & {% if cls.initial_rooms|length_is:0 %}N/A{% else %}{{ cls.prettyrooms|join:", "|texescape }}{% endif %} & {{ cls.emailcode }} : {{ cls.title|texescape }} & {{ cls.parent_class.getTeacherNames|join:", "|texescape }} \\ 
{% endfor %}\hline
\end{tabularx}

\end{center}

\vfill
\begin{pspicture}(3.0, 0.7in)
\psbarcode{% templatetag openbrace %}{{ student.invoice_id }}{% templatetag closebrace %}{includetext height=0.4}{code39}
\end{pspicture} \\
\vspace{0pt} \\
{{ student.name }} ({{ student.id }}) \\
Amount Owed: \${{ student.itemizedcosttotal|floatformat:"-2" }}
\vspace{2.5cm}
{% if not forloop.last %}\pagebreak{% endif %}
{% endfor %}

\end{document}
{% endautoescape %}
